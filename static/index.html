<html>
<head>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="js/g.js" charset="UTF-8"></script>
<script type="text/javascript" src="js/g.web.js" charset="UTF-8"></script>
<script type="text/javascript">

function on_load()
{

g.web.canvas(document.getElementsByTagName('canvas')[0]);

g.initialize(function ()
{
    g.is_running = false;

    g.web.assets.load([
        // 'shaders/basic_textured.json'
        'shaders/basic_textured.vert',
        'shaders/basic_textured.frag',
        'meshes/cube.json'
    ], function() {
        g.web.gfx.shader.create('basic_textured',
            g.web.assets['shaders/basic_textured.vert'],
            g.web.assets['shaders/basic_textured.frag']
        );

        g.web.assets['mesh/cube'] = g.web.gfx.mesh.create(g.web.assets["meshes/cube.json"]);
        g.is_running = true;
    });

	return true;
});


g.web.pointer.on_move(function (point)
{
    console.log(point);
});


g.web.on_message(function (msg)
{

});


g.update(function (dt)
{
	if (g.web.key.is_pressed('w')) { console.log('w pressed'); }
});


g.web.draw(function (dt)
{
    if (g.is_running == false) { return; }

    const cube = g.web.assets['mesh/cube'];
    cube.draw_with('basic_textured')
        .attribute({name:'a_position', buffer: 'positions', components: 4});
});

g.start();
}

</script>
</head>

<body style="margin:0" onload="on_load()">
<canvas style="padding:0;margin:0;width:100%;height:100%"></canvas>
</body>
</html>
